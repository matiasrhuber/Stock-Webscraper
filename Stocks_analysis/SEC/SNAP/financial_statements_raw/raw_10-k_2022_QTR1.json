[{"headers": [["Consolidated Statements of Cash Flows - USD ($) $ in Thousands", "12 Months Ended"], ["Dec. 31, 2021", "Dec. 31, 2020", "Dec. 31, 2019"]], "sections": ["Cash flows from operating activities", "Adjustments to reconcile net loss to net cash provided by (used in) operating activities:", "Change in operating assets and liabilities, net of effect of acquisitions:", "Cash flows from investing activities", "Cash flows from financing activities", "Supplemental disclosures", "Supplemental disclosures of non-cash activities"], "data": [["Net loss", "$ (487,955)", "$ (944,839)", "$ (1,033,660)"], ["Depreciation and amortization", "119,141", "86,744", "87,245"], ["Stock-based compensation", "1,092,135", "770,182", "686,013"], ["Amortization of debt discount and issuance costs", "4,311", "81,401", "17,797"], ["(Gains) losses on debt and equity securities, net", "(289,052)", "(10,250)", "(18,982)"], ["Induced conversion expense related to convertible notes", "41,538", "", ""], ["Gain on divestiture", "", "", "(39,883)"], ["Other", "8,643", "2,963", "(10,084)"], ["Accounts receivable, net of allowance", "(332,967)", "(255,818)", "(147,862)"], ["Prepaid expenses and other current assets", "(26,607)", "(14,587)", "(9,849)"], ["Operating lease right-of-use assets", "47,258", "38,940", "58,199"], ["Other assets", "(10,916)", "(11,442)", "1,169"], ["Accounts payable", "53,579", "20,374", "20,674"], ["Accrued expenses and other current liabilities", "117,092", "108,601", "146,063"], ["Operating lease liabilities", "(49,294)", "(49,730)", "(60,844)"], ["Other liabilities", "5,974", "9,817", "(954)"], ["Net cash provided by (used in) operating activities", "292,880", "(167,644)", "(304,958)"], ["Purchases of property and equipment", "(69,875)", "(57,832)", "(36,478)"], ["Purchases of strategic investments", "(41,160)", "(111,586)", "(5,481)"], ["Cash paid for acquisitions, net of cash acquired", "(310,915)", "(168,850)", "(77,119)"], ["Proceeds from divestiture, net", "", "", "73,796"], ["Purchases of marketable securities", "(2,438,983)", "(3,524,599)", "(2,477,388)"], ["Sales of marketable securities", "379,555", "389,974", "184,179"], ["Maturities of marketable securities", "2,536,725", "2,737,523", "1,608,854"], ["Other", "34,880", "5,506", "1,029"], ["Net cash provided by (used in) investing activities", "90,227", "(729,864)", "(728,608)"], ["Proceeds from issuance of convertible notes, net of issuance costs", "1,137,227", "988,582", "1,251,411"], ["Purchase of capped calls", "(86,825)", "(100,000)", "(102,086)"], ["Proceeds from the exercise of stock options", "14,671", "34,209", "16,527"], ["Net cash provided by financing activities", "1,065,073", "922,791", "1,165,852"], ["Change in cash, cash equivalents, and restricted cash", "1,448,180", "25,283", "132,286"], ["Cash, cash equivalents, and restricted cash, beginning of period", "546,543", "521,260", "388,974"], ["Cash, cash equivalents, and restricted cash, end of period", "1,994,723", "546,543", "521,260"], ["Cash paid for income taxes, net", "25,333", "3,692", "156"], ["Cash paid for interest", "10,887", "12,019", "1,546"], ["Net change in accounts payable and accrued expenses and other current liabilities related to property and equipment additions", "$ 6,498", "$ 2,732", "$ (6,027)"]]}, {"headers": [["Consolidated Statements of Operations - USD ($) shares in Thousands, $ in Thousands", "12 Months Ended"], ["Dec. 31, 2021", "Dec. 31, 2020", "Dec. 31, 2019"]], "sections": ["Income Statement [Abstract]", "Costs and expenses:", "Net loss per share attributable to Class A, Class B, and Class C common stockholders (Note 3):", "Weighted average shares used in computation of net loss per share:"], "data": [["Revenue", "$ 4,117,048", "$ 2,506,626", "$ 1,715,534"], ["Cost of revenue", "1,750,246", "1,182,505", "895,838"], ["Research and development", "1,565,467", "1,101,561", "883,509"], ["Sales and marketing", "792,764", "555,468", "458,598"], ["General and administrative", "710,640", "529,164", "580,917"], ["Total costs and expenses", "4,819,117", "3,368,698", "2,818,862"], ["Operating loss", "(702,069)", "(862,072)", "(1,103,328)"], ["Interest income", "5,199", "18,127", "36,042"], ["Interest expense", "(17,676)", "(97,228)", "(24,994)"], ["Other income (expense), net", "240,175", "14,988", "59,013"], ["Loss before income taxes", "(474,371)", "(926,185)", "(1,033,267)"], ["Income tax benefit (expense)", "(13,584)", "(18,654)", "(393)"], ["Net loss", "$ (487,955)", "$ (944,839)", "$ (1,033,660)"], ["Basic", "$ (0.31)", "$ (0.65)", "$ (0.75)"], ["Diluted", "$ (0.31)", "$ (0.65)", "$ (0.75)"], ["Basic", "1,558,997", "1,455,693", "1,375,462"], ["Diluted", "1,558,997", "1,455,693", "1,375,462"]]}, {"headers": [["Consolidated Balance Sheets - USD ($) $ in Thousands", "Dec. 31, 2021", "Dec. 31, 2020"]], "sections": ["Current assets", "Current liabilities", "Stockholders\u2019 equity", "Stockholders\u2019 equity", "Stockholders\u2019 equity"], "data": [["Cash and cash equivalents", "$ 1,993,809", "$ 545,618"], ["Marketable securities", "1,699,076", "1,991,922"], ["Accounts receivable, net of allowance", "1,068,873", "744,288"], ["Prepaid expenses and other current assets", "92,244", "56,147"], ["Total current assets", "4,854,002", "3,337,975"], ["Property and equipment, net", "202,644", "178,709"], ["Operating lease right-of-use assets", "322,252", "269,728"], ["Intangible assets, net", "277,654", "105,929"], ["Goodwill", "1,588,452", "939,259"], ["Other assets", "291,302", "192,638"], ["Total assets", "7,536,306", "5,024,238"], ["Accounts payable", "125,282", "71,908"], ["Operating lease liabilities", "52,396", "41,077"], ["Accrued expenses and other current liabilities", "674,108", "554,342"], ["Total current liabilities", "851,786", "667,327"], ["Convertible senior notes, net", "2,253,087", "1,675,169"], ["Operating lease liabilities, noncurrent", "325,509", "287,292"], ["Other liabilities", "315,756", "64,474"], ["Total liabilities", "3,746,138", "2,694,262"], ["Commitments and contingencies (Note 8)", "", ""], ["Additional paid-in capital", "12,069,097", "10,200,141"], ["Accumulated other comprehensive income (loss)", "5,521", "21,363"], ["Accumulated deficit", "(8,284,466)", "(7,891,542)"], ["Total stockholders\u2019 equity", "3,790,168", "2,329,976"], ["Total liabilities and stockholders\u2019 equity", "7,536,306", "5,024,238"], ["Class A Non-voting Common Stock", "", ""], ["Common stock, value", "14", "12"], ["Class C Voting Common Stock", "", ""], ["Common stock, value", "$ 2", "$ 2"]]}, {"headers": [["Consolidated Statements of Stockholders' Equity - USD ($) shares in Thousands, $ in Thousands", "Total", "Additional Paid-in Capital", "Additional Paid-in Capital \nCumulative Effect, Period of Adoption, Adjustment", "Accumulated Deficit", "Accumulated Deficit \nCumulative Effect, Period of Adoption, Adjustment", "Accumulated Other Comprehensive Income (Loss)", "Class A Non-voting Common Stock", "Class A Non-voting Common Stock \nCommon Stock", "Common Class B Stock Conversion from Class C Voting Common Stock \nCommon Stock", "Class C Voting Common Stock", "Class C Voting Common Stock \nCommon Stock", "Class B Voting Common Stock", "Class B Voting Common Stock \nCommon Stock"]], "sections": [], "data": [["Balance, beginning of period, shares at Dec. 31, 2018", "", "", "", "", "", "", "", "999,304", "", "", "224,611", "", "93,846"], ["Balance, beginning of period at Dec. 31, 2018", "", "$ 8,220,417", "", "$ (5,912,578)", "$ 308", "$ 3,147", "", "$ 10", "", "", "$ 2", "", "$ 1"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "3,291", "", "", "", "", "1,389"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "16,567", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "86,519", "", "", "", "", "300"], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, net", "", "", "", "", "", "", "", "$ 1", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "71,013", "", "", "", "", "(71,013)"], ["Conversion of stock to voting/non-voting common stock", "", "", "", "", "", "", "", "$ 1", "", "", "", "", "$ (1)"], ["Stock-based compensation expense", "", "686,013", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions", "", "6,913", "", "", "", "", "", "", "", "", "", "", ""], ["Equity component of convertible senior notes, net", "", "377,432", "", "", "", "", "", "", "", "", "", "", ""], ["Purchase of Capped Calls", "", "(102,086)", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "$ (1,033,660)", "", "", "(1,033,660)", "", "", "$ (817,156)", "", "", "$ (183,164)", "", "$ (33,341)", ""], ["Other comprehensive income (loss), net of tax", "$ (2,574)", "", "", "", "", "(2,574)", "", "", "", "", "", "", ""], ["Issuance of Class C voting common stock for settlement of restricted stock awards net, Shares", "", "", "", "", "", "", "", "", "", "", "6,536", "", ""], ["Balance, end of period, shares at Dec. 31, 2019", "1,415,796", "", "", "", "", "", "", "1,160,127", "", "", "231,147", "", "24,522"], ["Balance, end of period at Dec. 31, 2019", "$ 2,259,913", "9,205,256", "", "(6,945,930)", "(773)", "573", "", "$ 12", "", "", "$ 2", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "3,824", "", "", "", "", "754"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "34,209", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "78,042", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "6,017", "4,437", "", "(4,437)", "", "(6,017)"], ["Stock-based compensation expense", "", "771,084", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions", "", "3,003", "", "", "", "", "", "", "", "", "", "", ""], ["Equity component of convertible senior notes, net", "", "286,589", "", "", "", "", "", "", "", "", "", "", ""], ["Purchase of Capped Calls", "", "(100,000)", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "(944,839)", "", "", "(944,839)", "", "", "(775,801)", "", "", "(153,461)", "", "(15,577)", ""], ["Other comprehensive income (loss), net of tax", "$ 20,790", "", "", "", "", "20,790", "", "", "", "", "", "", ""], ["Issuance of Class C voting common stock for settlement of restricted stock awards net, Shares", "", "", "", "", "", "", "", "", "", "", "4,917", "", ""], ["Balance, end of period, shares at Dec. 31, 2020", "1,503,333", "", "", "", "", "", "", "1,248,010", "", "", "231,627", "", "23,696"], ["Balance, end of period at Dec. 31, 2020", "$ 2,329,976", "10,200,141", "$ (664,021)", "(7,891,542)", "$ 95,031", "21,363", "", "$ 12", "", "", "$ 2", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "1,174", "", "", "", "", "168"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "14,680", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "55,466", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, net", "", "", "", "", "", "", "", "$ 1", "", "", "", "", ""], ["Issuance of Class A non-voting common stock for the induced conversion related to convertible senior notes, shares", "", "", "", "", "", "", "", "52,410", "", "", "", "", ""], ["Issuance of Class A non-voting common stock for the induced conversion related to convertible senior notes", "", "1,175,191", "", "", "", "", "", "$ 1", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "1,095", "", "", "", "", "(1,095)"], ["Stock-based compensation expense", "", "1,088,506", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions and divestitures, Shares", "", "", "", "", "", "", "", "6,732", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions", "", "341,425", "", "", "", "", "", "", "", "", "", "", ""], ["Purchase of Capped Calls", "", "(86,825)", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "(487,955)", "", "", "(487,955)", "", "", "$ (408,118)", "", "", "$ (72,498)", "", "$ (7,339)", ""], ["Other comprehensive income (loss), net of tax", "$ (15,842)", "", "", "", "", "(15,842)", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2021", "1,619,283", "", "", "", "", "", "", "1,364,887", "", "", "231,627", "", "22,769"], ["Balance, end of period at Dec. 31, 2021", "$ 3,790,168", "$ 12,069,097", "", "$ (8,284,466)", "", "$ 5,521", "", "$ 14", "", "", "$ 2", "", ""]]}]