[{"headers": [["Consolidated Statements of Cash Flows - USD ($) $ in Thousands", "12 Months Ended"], ["Dec. 31, 2020", "Dec. 31, 2019", "Dec. 31, 2018"]], "sections": ["Cash flows from operating activities", "Adjustments to reconcile net loss to net cash used in operating activities:", "Change in operating assets and liabilities, net of effect of acquisitions:", "Cash flows from investing activities", "Cash flows from financing activities", "Supplemental disclosures", "Supplemental disclosures of non-cash activities"], "data": [["Net loss", "$ (944,839)", "$ (1,033,660)", "$ (1,255,911)"], ["Depreciation and amortization", "86,744", "87,245", "91,648"], ["Stock-based compensation", "770,182", "686,013", "538,211"], ["Deferred income taxes", "(6,326)", "(491)", "(383)"], ["Gain on divestiture", "", "(39,883)", ""], ["Amortization of debt discount and issuance costs", "81,401", "17,797", ""], ["Lease exit charges", "", "", "33,033"], ["Other", "(961)", "(28,575)", "(903)"], ["Accounts receivable, net of allowance", "(255,818)", "(147,862)", "(77,506)"], ["Prepaid expenses and other current assets", "(14,587)", "(9,849)", "1,594"], ["Operating lease right-of-use assets", "38,940", "58,199", ""], ["Other assets", "(11,442)", "1,169", "21,785"], ["Accounts payable", "20,374", "20,674", "(33,532)"], ["Accrued expenses and other current liabilities", "108,601", "146,063", "(14,325)"], ["Operating lease liabilities", "(49,730)", "(60,844)", ""], ["Other liabilities", "9,817", "(954)", "6,365"], ["Net cash used in operating activities", "(167,644)", "(304,958)", "(689,924)"], ["Purchases of property and equipment", "(57,832)", "(36,478)", "(120,242)"], ["Proceeds from divestiture, net", "", "73,796", ""], ["Cash paid for acquisitions, net of cash acquired", "(168,850)", "(77,119)", "(815)"], ["Non-marketable investments", "(111,586)", "(5,481)", "(22,495)"], ["Purchases of marketable securities", "(3,524,599)", "(2,477,388)", "(1,653,918)"], ["Sales of marketable securities", "389,974", "184,179", "45,007"], ["Maturities of marketable securities", "2,737,523", "1,608,854", "2,438,206"], ["Other", "5,506", "1,029", "8,711"], ["Net cash provided by (used in) investing activities", "(729,864)", "(728,608)", "694,454"], ["Proceeds from issuance of convertible notes, net of issuance costs", "988,582", "1,251,411", ""], ["Purchase of capped calls", "(100,000)", "(102,086)", ""], ["Proceeds from the exercise of stock options", "34,209", "16,527", "47,988"], ["Stock repurchases from employees for tax withholdings", "", "", "(551)"], ["Net cash provided by financing activities", "922,791", "1,165,852", "47,437"], ["Change in cash, cash equivalents, and restricted cash", "25,283", "132,286", "51,967"], ["Cash, cash equivalents, and restricted cash, beginning of period", "521,260", "388,974", "337,007"], ["Cash, cash equivalents, and restricted cash, end of period", "546,543", "521,260", "388,974"], ["Cash paid for income taxes, net", "3,692", "156", "3,598"], ["Cash paid for interest", "12,019", "1,546", ""], ["Net change in accounts payable and accrued expenses and other current liabilities related to property and equipment additions", "$ 2,732", "$ (6,027)", "$ (7,764)"]]}, {"headers": [["Consolidated Statements of Operations - USD ($) shares in Thousands, $ in Thousands", "12 Months Ended"], ["Dec. 31, 2020", "Dec. 31, 2019", "Dec. 31, 2018"]], "sections": ["Income Statement [Abstract]", "Costs and expenses:", "Net loss per share attributable to Class A, Class B, and Class C common stockholders (Note 3):", "Weighted average shares used in computation of net loss per share:"], "data": [["Revenue", "$ 2,506,626", "$ 1,715,534", "$ 1,180,446"], ["Cost of revenue", "1,182,505", "895,838", "798,865"], ["Research and development", "1,101,561", "883,509", "772,185"], ["Sales and marketing", "555,468", "458,598", "400,824"], ["General and administrative", "529,164", "580,917", "477,022"], ["Total costs and expenses", "3,368,698", "2,818,862", "2,448,896"], ["Operating loss", "(862,072)", "(1,103,328)", "(1,268,450)"], ["Interest income", "18,127", "36,042", "27,228"], ["Interest expense", "(97,228)", "(24,994)", "(3,894)"], ["Other income (expense), net", "14,988", "59,013", "(8,248)"], ["Loss before income taxes", "(926,185)", "(1,033,267)", "(1,253,364)"], ["Income tax benefit (expense)", "(18,654)", "(393)", "(2,547)"], ["Net loss", "$ (944,839)", "$ (1,033,660)", "$ (1,255,911)"], ["Basic", "$ (0.65)", "$ (0.75)", "$ (0.97)"], ["Diluted", "$ (0.65)", "$ (0.75)", "$ (0.97)"], ["Basic", "1,455,693", "1,375,462", "1,300,568"], ["Diluted", "1,455,693", "1,375,462", "1,300,568"]]}, {"headers": [["Consolidated Balance Sheets - USD ($) $ in Thousands", "Dec. 31, 2020", "Dec. 31, 2019"]], "sections": ["Current assets", "Current liabilities", "Stockholders\u2019 equity", "Stockholders\u2019 equity", "Stockholders\u2019 equity"], "data": [["Cash and cash equivalents", "$ 545,618", "$ 520,317"], ["Marketable securities", "1,991,922", "1,592,488"], ["Accounts receivable, net of allowance", "744,288", "492,194"], ["Prepaid expenses and other current assets", "56,147", "38,987"], ["Total current assets", "3,337,975", "2,643,986"], ["Property and equipment, net", "178,709", "173,667"], ["Operating lease right-of-use assets", "269,728", "275,447"], ["Intangible assets, net", "105,929", "92,121"], ["Goodwill", "939,259", "761,153"], ["Other assets", "192,638", "65,550"], ["Total assets", "5,024,238", "4,011,924"], ["Accounts payable", "71,908", "46,886"], ["Operating lease liabilities", "41,077", "42,179"], ["Accrued expenses and other current liabilities", "554,342", "410,610"], ["Total current liabilities", "667,327", "499,675"], ["Convertible senior notes, net", "1,675,169", "891,776"], ["Operating lease liabilities, noncurrent", "287,292", "303,178"], ["Other liabilities", "64,474", "57,382"], ["Total liabilities", "2,694,262", "1,752,011"], ["Commitments and contingencies (Note 8)", "", ""], ["Additional paid-in capital", "10,200,141", "9,205,256"], ["Accumulated other comprehensive income (loss)", "21,363", "573"], ["Accumulated deficit", "(7,891,542)", "(6,945,930)"], ["Total stockholders\u2019 equity", "2,329,976", "2,259,913"], ["Total liabilities and stockholders\u2019 equity", "5,024,238", "4,011,924"], ["Class A Non-voting Common Stock", "", ""], ["Common stock, value", "12", "12"], ["Class C Voting Common Stock", "", ""], ["Common stock, value", "$ 2", "$ 2"]]}, {"headers": [["Consolidated Statements of Stockholders' Equity - USD ($) shares in Thousands, $ in Thousands", "Total", "Additional Paid-in Capital", "Accumulated Deficit", "Accumulated Deficit \nCumulative Effect, Period of Adoption, Adjustment", "Accumulated Other Comprehensive Income (Loss)", "Class A Non-voting Common Stock", "Class A Non-voting Common Stock \nCommon Stock", "Common Class B Stock Conversion from Class C Voting Common Stock \nCommon Stock", "Class C Voting Common Stock", "Class C Voting Common Stock \nCommon Stock", "Class B Voting Common Stock", "Class B Voting Common Stock \nCommon Stock"]], "sections": [], "data": [["Balance, beginning of period, shares at Dec. 31, 2017", "", "", "", "", "", "", "883,022", "", "", "216,616", "", "122,564"], ["Balance, beginning of period at Dec. 31, 2017", "", "$ 7,634,825", "$ (4,656,667)", "", "$ 14,157", "", "$ 9", "", "", "$ 2", "", "$ 1"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "15,856", "", "", "", "", "3,414"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "47,988", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "64,831", "", "", "", "", "3,502"], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, net", "", "", "", "", "", "", "$ 1", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "35,634", "", "", "", "", "(35,634)"], ["Issuance of Class C voting common stock for settlement of restricted stock awards net, Shares", "", "", "", "", "", "", "", "", "", "7,995", "", ""], ["Stock-based compensation expense", "", "538,211", "", "", "", "", "", "", "", "", "", ""], ["Stock repurchases from employees for tax withholdings", "", "(607)", "", "", "", "", "", "", "", "", "", ""], ["Stock repurchases from employees for tax withholdings, shares", "", "", "", "", "", "", "(39)", "", "", "", "", ""], ["Net loss", "$ (1,255,911)", "", "(1,255,911)", "", "", "$ (921,235)", "", "", "$ (239,779)", "", "$ (94,897)", ""], ["Other comprehensive income (loss), net of tax", "$ (11,010)", "", "", "", "(11,010)", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2018", "1,317,761", "", "", "", "", "", "999,304", "", "", "224,611", "", "93,846"], ["Balance, end of period at Dec. 31, 2018", "$ 2,310,999", "8,220,417", "(5,912,578)", "$ 308", "3,147", "", "$ 10", "", "", "$ 2", "", "$ 1"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "3,291", "", "", "", "", "1,389"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "16,567", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "86,519", "", "", "", "", "300"], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, net", "", "", "", "", "", "", "$ 1", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions and divestitures", "", "6,913", "", "", "", "", "", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "71,013", "", "", "", "", "(71,013)"], ["Conversion of stock to voting/non-voting common stock", "", "", "", "", "", "", "$ 1", "", "", "", "", "$ (1)"], ["Issuance of Class C voting common stock for settlement of restricted stock awards net, Shares", "", "", "", "", "", "", "", "", "", "6,536", "", ""], ["Stock-based compensation expense", "", "686,013", "", "", "", "", "", "", "", "", "", ""], ["Equity component of convertible senior notes, net", "", "377,432", "", "", "", "", "", "", "", "", "", ""], ["Purchase of Capped Calls", "", "(102,086)", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "(1,033,660)", "", "(1,033,660)", "", "", "(817,156)", "", "", "(183,164)", "", "(33,341)", ""], ["Other comprehensive income (loss), net of tax", "$ (2,574)", "", "", "", "(2,574)", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2019", "1,415,796", "", "", "", "", "", "1,160,127", "", "", "231,147", "", "24,522"], ["Balance, end of period at Dec. 31, 2019", "$ 2,259,913", "9,205,256", "(6,945,930)", "$ (773)", "573", "", "$ 12", "", "", "$ 2", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "3,824", "", "", "", "", "754"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "34,209", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "78,042", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions and divestitures", "", "3,003", "", "", "", "", "", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "6,017", "4,437", "", "(4,437)", "", "(6,017)"], ["Issuance of Class C voting common stock for settlement of restricted stock awards net, Shares", "", "", "", "", "", "", "", "", "", "4,917", "", ""], ["Stock-based compensation expense", "", "771,084", "", "", "", "", "", "", "", "", "", ""], ["Equity component of convertible senior notes, net", "", "286,589", "", "", "", "", "", "", "", "", "", ""], ["Purchase of Capped Calls", "", "(100,000)", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "(944,839)", "", "(944,839)", "", "", "$ (775,801)", "", "", "$ (153,461)", "", "$ (15,577)", ""], ["Other comprehensive income (loss), net of tax", "$ 20,790", "", "", "", "20,790", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2020", "1,503,333", "", "", "", "", "", "1,248,010", "", "", "231,627", "", "23,696"], ["Balance, end of period at Dec. 31, 2020", "$ 2,329,976", "$ 10,200,141", "$ (7,891,542)", "", "$ 21,363", "", "$ 12", "", "", "$ 2", "", ""]]}]