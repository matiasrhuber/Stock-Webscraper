[{"headers": [["Consolidated Statements of Cash Flows - USD ($) $ in Thousands", "3 Months Ended", "9 Months Ended"], ["Sep. 30, 2021", "Sep. 30, 2020", "Sep. 30, 2021", "Sep. 30, 2020"]], "sections": ["Cash flows from operating activities", "Adjustments to reconcile net loss to net cash provided by (used in) operating activities:", "Change in operating assets and liabilities, net of effect of acquisitions:", "Cash flows from investing activities", "Cash flows from financing activities", "Supplemental disclosures"], "data": [["Net loss", "$ (71,959)", "$ (199,853)", "$ (510,505)", "$ (831,740)"], ["Depreciation and amortization", "32,510", "21,804", "84,278", "63,933"], ["Stock-based compensation", "300,898", "192,080", "794,571", "550,300"], ["Amortization of debt discount and issuance costs", "1,109", "24,503", "3,301", "56,478"], ["(Gains) losses on debt and equity securities, net", "(121,007)", "4,142", "(223,527)", "12,114"], ["Induced conversion expense related to convertible notes", "4,536", "", "41,538", ""], ["Other", "(732)", "1,924", "4,019", "(443)"], ["Accounts receivable, net of allowance", "(132,908)", "(151,856)", "(178,044)", "(43,310)"], ["Prepaid expenses and other current assets", "(4,191)", "(10,608)", "(15,562)", "(19,352)"], ["Operating lease right-of-use assets", "11,470", "10,054", "35,217", "28,307"], ["Other assets", "(4,204)", "3,390", "(5,440)", "2,343"], ["Accounts payable", "11,084", "3,435", "17,430", "11,448"], ["Accrued expenses and other current liabilities", "56,687", "61,595", "89,726", "94,368"], ["Operating lease liabilities", "(13,911)", "(15,760)", "(35,265)", "(40,739)"], ["Other liabilities", "2,170", "322", "5,615", "1,194"], ["Net cash provided by (used in) operating activities", "71,552", "(54,828)", "107,352", "(115,099)"], ["Purchases of property and equipment", "(19,836)", "(14,727)", "(45,310)", "(41,385)"], ["Strategic investments", "(735)", "(3,500)", "(33,510)", "(95,341)"], ["Cash paid for acquisitions, net of cash acquired", "(37,375)", "(33,508)", "(176,591)", "(53,712)"], ["Purchases of marketable securities", "(609,176)", "(1,148,344)", "(1,896,766)", "(2,576,892)"], ["Sales of marketable securities", "19,999", "155,899", "367,555", "373,857"], ["Maturities of marketable securities", "492,921", "668,930", "2,006,744", "1,898,176"], ["Other", "(1,000)", "", "35,100", "(500)"], ["Net cash provided by (used in) investing activities", "(155,202)", "(375,250)", "257,222", "(495,797)"], ["Proceeds from issuance of convertible notes, net of issuance costs", "", "", "1,137,227", "988,582"], ["Purchase of capped calls", "", "", "(86,825)", "(100,000)"], ["Proceeds from the exercise of stock options", "4,045", "2,434", "11,755", "26,041"], ["Net cash provided by financing activities", "4,045", "2,434", "1,062,157", "914,623"], ["Change in cash, cash equivalents, and restricted cash", "(79,605)", "(427,644)", "1,426,731", "303,727"], ["Cash, cash equivalents, and restricted cash, beginning of period", "2,052,879", "1,252,631", "546,543", "521,260"], ["Cash, cash equivalents, and restricted cash, end of period", "1,973,274", "824,987", "1,973,274", "824,987"], ["Cash paid for income taxes, net", "1,940", "1,309", "16,228", "2,679"], ["Cash paid for interest", "$ 3,508", "$ 5,113", "$ 10,249", "$ 10,378"]]}, {"headers": [["Consolidated Statements of Operations - USD ($) shares in Thousands, $ in Thousands", "3 Months Ended", "9 Months Ended"], ["Sep. 30, 2021", "Sep. 30, 2020", "Sep. 30, 2021", "Sep. 30, 2020"]], "sections": ["Income Statement [Abstract]", "Costs and expenses:", "Net loss per share attributable to Class A, Class B, and Class C common stockholders (Note 3):", "Weighted average shares used in computation of net loss per share:"], "data": [["Revenue", "$ 1,067,471", "$ 678,668", "$ 2,819,163", "$ 1,595,304"], ["Cost of revenue", "443,473", "293,095", "1,301,095", "796,959"], ["Research and development", "412,021", "283,639", "1,131,272", "783,115"], ["Sales and marketing", "217,526", "143,511", "547,536", "397,834"], ["General and administrative", "175,275", "126,287", "516,202", "382,232"], ["Total costs and expenses", "1,248,295", "846,532", "3,496,105", "2,360,140"], ["Operating loss", "(180,824)", "(167,864)", "(676,942)", "(764,836)"], ["Interest income", "1,257", "2,801", "3,645", "16,158"], ["Interest expense", "(4,031)", "(28,212)", "(13,626)", "(68,052)"], ["Other income (expense), net", "112,631", "(5,669)", "176,971", "(14,483)"], ["Loss before income taxes", "(70,967)", "(198,944)", "(509,952)", "(831,213)"], ["Income tax benefit (expense)", "(992)", "(909)", "(553)", "(527)"], ["Net loss", "$ (71,959)", "$ (199,853)", "$ (510,505)", "$ (831,740)"], ["Basic", "$ (0.05)", "$ (0.14)", "$ (0.33)", "$ (0.58)"], ["Diluted", "$ (0.05)", "$ (0.14)", "$ (0.33)", "$ (0.58)"], ["Basic", "1,580,966", "1,466,420", "1,543,568", "1,446,040"], ["Diluted", "1,580,966", "1,466,420", "1,543,568", "1,446,040"]]}, {"headers": [["Consolidated Balance Sheets - USD ($) $ in Thousands", "Sep. 30, 2021", "Dec. 31, 2020"]], "sections": ["Current assets", "Current liabilities", "Stockholders\u2019 equity", "Stockholders\u2019 equity", "Stockholders\u2019 equity"], "data": [["Cash and cash equivalents", "$ 1,972,358", "$ 545,618"], ["Marketable securities", "1,509,463", "1,991,922"], ["Accounts receivable, net of allowance", "913,539", "744,288"], ["Prepaid expenses and other current assets", "76,669", "56,147"], ["Total current assets", "4,472,029", "3,337,975"], ["Property and equipment, net", "189,946", "178,709"], ["Operating lease right-of-use assets", "291,181", "269,728"], ["Intangible assets, net", "261,131", "105,929"], ["Goodwill", "1,484,108", "939,259"], ["Other assets", "412,770", "192,638"], ["Total assets", "7,111,165", "5,024,238"], ["Accounts payable", "91,769", "71,908"], ["Operating lease liabilities", "56,191", "41,077"], ["Accrued expenses and other current liabilities", "660,536", "554,342"], ["Total current liabilities", "808,496", "667,327"], ["Convertible senior notes, net", "2,252,079", "1,675,169"], ["Operating lease liabilities, noncurrent", "292,506", "287,292"], ["Other liabilities", "317,968", "64,474"], ["Total liabilities", "3,671,049", "2,694,262"], ["Commitments and contingencies (Note 8)", "", ""], ["Additional paid-in capital", "11,737,338", "10,200,141"], ["Accumulated other comprehensive income (loss)", "9,779", "21,363"], ["Accumulated deficit", "(8,307,016)", "(7,891,542)"], ["Total stockholders\u2019 equity", "3,440,116", "2,329,976"], ["Total liabilities and stockholders\u2019 equity", "7,111,165", "5,024,238"], ["Class A Non-voting Common Stock", "", ""], ["Common stock, value", "13", "12"], ["Class C Voting Common Stock", "", ""], ["Common stock, value", "$ 2", "$ 2"]]}, {"headers": [["Consolidated Statements of Stockholders' Equity - USD ($) shares in Thousands, $ in Thousands", "Total", "Additional Paid-in Capital", "Additional Paid-in Capital \nCumulative Effect, Period of Adoption, Adjustment", "Accumulated Deficit", "Accumulated Deficit \nCumulative Effect, Period of Adoption, Adjustment", "Accumulated Other Comprehensive Income (Loss)", "Class A Non-voting Common Stock", "Class A Non-voting Common Stock \nCommon Stock", "Class A Non-voting Common Stock \nAdditional Paid-in Capital", "Class B Common Stock", "Class B Common Stock \nCommon Stock", "Class C Common Stock", "Class C Common Stock \nCommon Stock", "Common Class B Stock Conversion from Class C Voting Common Stock \nCommon Stock"]], "sections": [], "data": [["Balance, beginning of period, shares at Dec. 31, 2019", "", "", "", "", "", "", "", "1,160,127", "", "", "24,522", "", "231,147", ""], ["Balance, beginning of period at Dec. 31, 2019", "", "$ 9,205,256", "", "$ (6,945,930)", "$ (779)", "$ 573", "", "$ 12", "", "", "", "", "$ 2", ""], ["Stock-based compensation expense", "", "550,820", "", "", "", "", "", "", "", "", "", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "3,036", "", "", "521", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "26,042", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "60,446", "", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "5,837", "", "", "(5,837)", "", "(4,437)", "4,437"], ["Issuance of Class C voting common stock for settlement of restricted stock awards net, Shares", "", "", "", "", "", "", "", "", "", "", "", "", "4,917", ""], ["Equity component of convertible senior notes, net", "", "286,589", "", "", "", "", "", "", "", "", "", "", "", ""], ["Purchase of capped calls", "", "(100,000)", "", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "$ (831,740)", "", "", "(831,740)", "", "", "$ (680,951)", "", "", "$ (13,867)", "", "$ (136,922)", "", ""], ["Other comprehensive income (loss), net of tax", "$ 7,926", "", "", "", "", "7,926", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Sep. 30, 2020", "1,484,716", "", "", "", "", "", "", "1,229,446", "", "", "23,643", "", "231,627", ""], ["Balance, end of period at Sep. 30, 2020", "$ 2,198,771", "9,968,707", "", "(7,778,449)", "", "8,499", "", "$ 12", "", "", "", "", "$ 2", ""], ["Balance, beginning of period, shares at Jun. 30, 2020", "", "", "", "", "", "", "", "1,204,957", "", "", "24,215", "", "234,448", ""], ["Balance, beginning of period at Jun. 30, 2020", "", "9,773,857", "", "(7,578,597)", "", "(609)", "", "$ 12", "", "", "", "", "$ 2", ""], ["Stock-based compensation expense", "", "192,416", "", "", "", "", "", "", "", "", "", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "292", "", "", "128", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "2,434", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "19,060", "", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "5,137", "", "", "(5,137)", "", "(4,437)", "4,437"], ["Issuance of Class C voting common stock for settlement of restricted stock awards net, Shares", "", "", "", "", "", "", "", "", "", "", "", "", "1,616", ""], ["Net loss", "(199,853)", "", "", "(199,852)", "", "", "(164,499)", "", "", "(3,234)", "", "(32,120)", "", ""], ["Other comprehensive income (loss), net of tax", "$ 9,108", "", "", "", "", "9,108", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Sep. 30, 2020", "1,484,716", "", "", "", "", "", "", "1,229,446", "", "", "23,643", "", "231,627", ""], ["Balance, end of period at Sep. 30, 2020", "$ 2,198,771", "9,968,707", "", "(7,778,449)", "", "8,499", "", "$ 12", "", "", "", "", "$ 2", ""], ["Balance, beginning of period, shares at Dec. 31, 2020", "", "", "", "", "", "", "", "1,248,010", "", "", "23,696", "", "231,627", ""], ["Balance, beginning of period at Dec. 31, 2020", "2,329,976", "10,200,141", "$ (664,021)", "(7,891,542)", "$ 95,031", "21,363", "", "$ 12", "", "", "", "", "$ 2", ""], ["Stock-based compensation expense", "", "792,454", "", "", "", "", "", "", "", "", "", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "890", "", "", "67", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "11,755", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of non-voting common stock in connection with acquisitions , shares", "", "", "", "", "", "", "", "5,817", "", "", "", "", "", ""], ["Issuance of non-voting common stock in connection with acquisitions", "", "", "", "", "", "", "", "", "$ 308,636", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "42,636", "", "", "", "", "", ""], ["Issuance of non-voting common stock for the induced conversion related to convertible senior notes, shares", "", "", "", "", "", "", "", "52,410", "", "", "", "", "", ""], ["Issuance of non-voting common stock for the induced conversion related to convertible senior notes", "", "", "", "", "", "", "", "", "1,175,198", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "127", "", "", "(127)", "", "", ""], ["Conversion of stock to voting/non-voting common stock", "", "", "", "", "", "", "", "$ 1", "", "", "", "", "", ""], ["Purchase of capped calls", "", "(86,825)", "", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "(510,505)", "", "", "(510,505)", "", "", "(426,077)", "", "", "(7,822)", "", "(76,606)", "", ""], ["Other comprehensive income (loss), net of tax", "$ (11,584)", "", "", "", "", "(11,584)", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Sep. 30, 2021", "1,605,153", "", "", "", "", "", "", "1,349,890", "", "", "23,636", "", "231,627", ""], ["Balance, end of period at Sep. 30, 2021", "$ 3,440,116", "11,737,338", "", "(8,307,016)", "", "9,779", "", "$ 13", "", "", "", "", "$ 2", ""], ["Balance, beginning of period, shares at Jun. 30, 2021", "", "", "", "", "", "", "", "1,321,477", "", "", "23,640", "", "231,627", ""], ["Balance, beginning of period at Jun. 30, 2021", "", "11,129,196", "", "(8,235,057)", "", "13,847", "", "$ 13", "", "", "", "", "$ 2", ""], ["Stock-based compensation expense", "", "299,450", "", "", "", "", "", "", "", "", "", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "342", "", "", "59", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "4,045", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of non-voting common stock in connection with acquisitions , shares", "", "", "", "", "", "", "", "84", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "13,912", "", "", "", "", "", ""], ["Issuance of non-voting common stock for the induced conversion related to convertible senior notes, shares", "", "", "", "", "", "", "", "14,012", "", "", "", "", "", ""], ["Issuance of non-voting common stock for the induced conversion related to convertible senior notes", "", "", "", "", "", "", "", "", "$ 304,647", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "63", "", "", "(63)", "", "", ""], ["Net loss", "(71,959)", "", "", "(71,959)", "", "", "$ (60,340)", "", "", "$ (1,076)", "", "$ (10,543)", "", ""], ["Other comprehensive income (loss), net of tax", "$ (4,068)", "", "", "", "", "(4,068)", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Sep. 30, 2021", "1,605,153", "", "", "", "", "", "", "1,349,890", "", "", "23,636", "", "231,627", ""], ["Balance, end of period at Sep. 30, 2021", "$ 3,440,116", "$ 11,737,338", "", "$ (8,307,016)", "", "$ 9,779", "", "$ 13", "", "", "", "", "$ 2", ""]]}]