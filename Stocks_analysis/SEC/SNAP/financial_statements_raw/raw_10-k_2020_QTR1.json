[{"headers": [["Consolidated Statements of Cash Flows - USD ($) $ in Thousands", "12 Months Ended"], ["Dec. 31, 2019", "Dec. 31, 2018", "Dec. 31, 2017"]], "sections": ["Cash flows from operating activities", "Adjustments to reconcile net loss to net cash used in operating activities:", "Change in operating assets and liabilities, net of effect of acquisitions:", "Cash flows from investing activities", "Cash flows from financing activities", "Supplemental disclosures", "Supplemental disclosures of non-cash activities"], "data": [["Net loss", "$ (1,033,660)", "$ (1,255,911)", "$ (3,445,066)"], ["Depreciation and amortization", "87,245", "91,648", "61,288"], ["Stock-based compensation", "686,013", "538,211", "2,639,895"], ["Deferred income taxes", "(491)", "(383)", "(17,490)"], ["Gain on divestiture", "(39,883)", "0", "0"], ["Amortization of debt discount and issuance costs", "17,797", "0", "0"], ["Lease exit charges", "0", "33,033", "0"], ["Excess inventory reserve and related asset impairment", "0", "0", "21,997"], ["Other", "(28,575)", "(903)", "(6,356)"], ["Accounts receivable, net of allowance", "(147,862)", "(77,506)", "(104,357)"], ["Prepaid expenses and other current assets", "(9,849)", "1,594", "(39,783)"], ["Operating lease right-of-use assets", "58,199", "0", "0"], ["Other assets", "1,169", "21,785", "(4,771)"], ["Accounts payable", "20,674", "(33,532)", "49,696"], ["Accrued expenses and other current liabilities", "146,063", "(14,325)", "100,988"], ["Operating lease liabilities", "(60,844)", "0", "0"], ["Other liabilities", "(954)", "6,365", "9,292"], ["Net cash used in operating activities", "(304,958)", "(689,924)", "(734,667)"], ["Purchases of property and equipment", "(36,478)", "(120,242)", "(84,518)"], ["Sales of property and equipment", "0", "11,276", "0"], ["Proceeds from divestiture, net", "73,796", "0", "0"], ["Cash paid for acquisitions, net of cash acquired", "(77,119)", "(815)", "(386,011)"], ["Non-marketable investments", "(5,481)", "(22,495)", "(10,030)"], ["Purchases of marketable securities", "(2,477,388)", "(1,653,918)", "(3,862,637)"], ["Sales of marketable securities", "184,179", "45,007", "511,068"], ["Maturities of marketable securities", "1,608,854", "2,438,206", "2,483,225"], ["Other", "1,029", "(2,565)", "(8,107)"], ["Net cash provided by (used in) investing activities", "(728,608)", "694,454", "(1,357,010)"], ["Proceeds from issuance of convertible notes, net of issuance costs", "1,251,411", "0", "0"], ["Purchase of capped calls", "(102,086)", "0", "0"], ["Proceeds from the exercise of stock options", "16,527", "47,988", "11,379"], ["Stock repurchases from employees for tax withholdings", "0", "(551)", "(394,156)"], ["Proceeds from issuance of Class A common stock in initial public offering, net of underwriting commissions", "0", "0", "2,657,797"], ["Payments of deferred offering costs", "0", "0", "(9,672)"], ["Net cash provided by financing activities", "1,165,852", "47,437", "2,265,348"], ["Change in cash, cash equivalents, and restricted cash", "132,286", "51,967", "173,671"], ["Cash, cash equivalents, and restricted cash, beginning of period", "388,974", "337,007", "163,336"], ["Cash, cash equivalents, and restricted cash, end of period", "521,260", "388,974", "337,007"], ["Cash paid for income taxes, net", "156", "3,598", "6,226"], ["Net change in accounts payable and accrued expenses and other current liabilities related to property and equipment additions", "$ (6,027)", "$ (7,764)", "$ 13,139"]]}, {"headers": [["Consolidated Statements of Operations - USD ($) shares in Thousands, $ in Thousands", "12 Months Ended"], ["Dec. 31, 2019", "Dec. 31, 2018", "Dec. 31, 2017"]], "sections": ["Income Statement [Abstract]", "Costs and expenses:", "Net loss per share attributable to Class A, Class B, and Class C common stockholders (Note 3):", "Weighted average shares used in computation of net loss per share:"], "data": [["Revenue", "$ 1,715,534", "$ 1,180,446", "$ 824,949"], ["Cost of revenue", "895,838", "798,865", "717,462"], ["Research and development", "883,509", "772,185", "1,534,863"], ["Sales and marketing", "458,598", "400,824", "522,605"], ["General and administrative", "580,917", "477,022", "1,535,595"], ["Total costs and expenses", "2,818,862", "2,448,896", "4,310,525"], ["Operating loss", "(1,103,328)", "(1,268,450)", "(3,485,576)"], ["Interest income", "36,042", "27,228", "21,096"], ["Interest expense", "(24,994)", "(3,894)", "(3,456)"], ["Other income (expense), net", "59,013", "(8,248)", "4,528"], ["Loss before income taxes", "(1,033,267)", "(1,253,364)", "(3,463,408)"], ["Income tax benefit (expense)", "(393)", "(2,547)", "18,342"], ["Net loss", "$ (1,033,660)", "$ (1,255,911)", "$ (3,445,066)"], ["Basic", "$ (0.75)", "$ (0.97)", "$ (2.95)"], ["Diluted", "$ (0.75)", "$ (0.97)", "$ (2.95)"], ["Basic", "1,375,462", "1,300,568", "1,166,085"], ["Diluted", "1,375,462", "1,300,568", "1,166,085"]]}, {"headers": [["Consolidated Balance Sheets - USD ($) $ in Thousands", "Dec. 31, 2019", "Dec. 31, 2018"]], "sections": ["Current assets", "Current liabilities", "Stockholders\u2019 equity", "Stockholders\u2019 equity", "Stockholders\u2019 equity", "Stockholders\u2019 equity"], "data": [["Cash and cash equivalents", "$ 520,317", "$ 387,149"], ["Marketable securities", "1,592,488", "891,914"], ["Accounts receivable, net of allowance", "492,194", "354,965"], ["Prepaid expenses and other current assets", "38,987", "41,900"], ["Total current assets", "2,643,986", "1,675,928"], ["Property and equipment, net", "173,667", "212,560"], ["Operating lease right-of-use assets", "275,447", ""], ["Intangible assets, net", "92,121", "126,054"], ["Goodwill", "761,153", "632,370"], ["Other assets", "65,550", "67,194"], ["Total assets", "4,011,924", "2,714,106"], ["Accounts payable", "46,886", "30,876"], ["Operating lease liabilities", "42,179", ""], ["Accrued expenses and other current liabilities", "410,610", "261,815"], ["Total current liabilities", "499,675", "292,691"], ["Convertible senior notes, net", "891,776", ""], ["Operating lease liabilities, noncurrent", "303,178", ""], ["Other liabilities", "57,382", "110,416"], ["Total liabilities", "1,752,011", "403,107"], ["Commitments and contingencies (Note 8)", "", ""], ["Additional paid-in capital", "9,205,256", "8,220,417"], ["Accumulated other comprehensive income", "573", "3,147"], ["Accumulated deficit", "(6,945,930)", "(5,912,578)"], ["Total stockholders\u2019 equity", "2,259,913", "2,310,999"], ["Total liabilities and stockholders\u2019 equity", "4,011,924", "2,714,106"], ["Class A Non-voting Common Stock", "", ""], ["Common stock, value", "12", "10"], ["Class B Voting Common Stock", "", ""], ["Common stock, value", "", "1"], ["Class C Voting Common Stock", "", ""], ["Common stock, value", "$ 2", "$ 2"]]}, {"headers": [["Consolidated Statements of Stockholders' Equity - USD ($) shares in Thousands, $ in Thousands", "Total", "Additional Paid-in Capital", "Accumulated Deficit", "Accumulated Other Comprehensive Income (Loss)", "Convertible Voting Preferred Stock, Series A, A-1, and B \nPreferred Stock", "Convertible Non-voting Preferred Stock, Series C \nPreferred Stock", "Convertible Non-voting Preferred Stock, Series D, E, and F \nPreferred Stock", "Series FP Convertible Voting Preferred Stock \nPreferred Stock", "Class A Non-voting Common Stock", "Class A Non-voting Common Stock \nCommon Stock", "Class B Voting Common Stock", "Class B Voting Common Stock \nCommon Stock", "Class C Voting Common Stock", "Class C Voting Common Stock \nCommon Stock"]], "sections": [], "data": [["Balance, beginning of period, shares at Dec. 31, 2016", "", "", "", "", "146,962", "16,000", "83,851", "215,887", "", "504,902", "", "31,469", "", ""], ["Balance, beginning of period at Dec. 31, 2016", "", "$ 2,728,823", "$ (1,207,862)", "$ (2,057)", "$ 1", "", "$ 2", "$ 2", "", "$ 5", "", "", "", ""], ["Stock-based compensation expense", "", "2,639,895", "", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "$ (3,445,066)", "", "(3,445,066)", "", "", "", "", "", "$ (2,169,120)", "", "$ (548,098)", "", "$ (727,848)", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "(146,962)", "(16,000)", "(83,851)", "(215,887)", "", "169,800", "", "246,813", "", "215,887"], ["Conversion of stock to voting/non-voting common stock", "", "", "", "", "$ (1)", "", "$ (2)", "$ (2)", "", "$ 2", "", "$ 2", "", "$ 2"], ["Issuance of Class C voting common stock for settlement of restricted stock units, net, shares", "", "", "", "", "", "", "", "", "", "", "", "", "", "3,122"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "", "", "9,928", "", "9,396", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "11,379", "", "", "", "", "", "", "", "", "", "", "", ""], ["Shares converted to Class A non-voting common stock and subsequently sold in connection with exercise of stock options, shares", "", "", "", "", "", "", "", "", "", "", "", "(4,923)", "", ""], ["Shares issued in connection with exercise of stock options, converted from Class B voting common stock and subsequently sold", "", "", "", "", "", "", "", "", "", "4,923", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions and divestitures, Shares", "", "", "", "", "", "", "", "", "", "1,854", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions and divestitures", "", "6,406", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "", "", "40,922", "", "18,906", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, net", "", "", "", "", "", "", "", "", "", "", "", "$ 1", "", ""], ["Issuance of stock, net of issuance costs. shares", "", "", "", "", "", "", "", "", "", "160,350", "", "", "", ""], ["Issuance of stock, net of issuance costs", "", "2,642,729", "", "", "", "", "", "", "", "$ 2", "", "", "", ""], ["Stock repurchases from employees for tax withholdings", "", "(394,407)", "", "", "", "", "", "", "", "", "", "", "", ""], ["Stock repurchases from employees for tax withholdings, shares", "", "", "", "", "", "", "", "", "", "(16,867)", "", "(8,390)", "", ""], ["Class A non-voting common stock sold to cover taxes, shares", "", "", "", "", "", "", "", "", "", "7,210", "", "", "", ""], ["Shares converted to Class A non-voting common stock and subsequently sold to cover taxes, shares", "", "", "", "", "", "", "", "", "", "", "", "(907)", "", "(2,393)"], ["Other comprehensive income (loss)", "$ 16,214", "", "", "16,214", "", "", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2017", "1,222,202", "", "", "", "", "", "", "", "", "883,022", "", "122,564", "", "216,616"], ["Balance, end of period at Dec. 31, 2017", "$ 2,992,327", "7,634,825", "(4,656,667)", "14,157", "", "", "", "", "", "$ 9", "", "$ 1", "", "$ 2"], ["Cumulative-effect adjustment from accounting changes", "", "", "(3,739)", "", "", "", "", "", "", "", "", "", "", ""], ["Stock-based compensation expense", "", "538,211", "", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "(1,255,911)", "", "(1,255,911)", "", "", "", "", "", "(921,235)", "", "(94,897)", "", "(239,779)", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "", "", "35,634", "", "", "", ""], ["Issuance of Class C voting common stock for settlement of restricted stock units, net, shares", "", "", "", "", "", "", "", "", "", "", "", "", "", "7,995"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "", "", "15,856", "", "3,414", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "47,988", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "", "", "64,831", "", "3,502", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, net", "", "", "", "", "", "", "", "", "", "$ 1", "", "", "", ""], ["Stock repurchases from employees for tax withholdings", "", "(607)", "", "", "", "", "", "", "", "", "", "", "", ""], ["Stock repurchases from employees for tax withholdings, shares", "", "", "", "", "", "", "", "", "", "(39)", "", "", "", ""], ["Other comprehensive income (loss)", "$ (11,010)", "", "", "(11,010)", "", "", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2018", "1,317,761", "", "", "", "", "", "", "", "", "999,304", "", "93,846", "", "224,611"], ["Balance, end of period at Dec. 31, 2018", "$ 2,310,999", "8,220,417", "(5,912,578)", "3,147", "", "", "", "", "", "$ 10", "", "$ 1", "", "$ 2"], ["Stock-based compensation expense", "", "686,013", "", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "(1,033,660)", "", "(1,033,660)", "", "", "", "", "", "$ (817,156)", "", "$ (33,341)", "", "$ (183,164)", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "", "", "71,013", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock", "", "", "", "", "", "", "", "", "", "$ 1", "", "", "", ""], ["Issuance of Class C voting common stock for settlement of restricted stock units, net, shares", "", "", "", "", "", "", "", "", "", "", "", "", "", "6,536"], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "", "", "3,291", "", "1,389", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "16,567", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions and divestitures", "", "6,913", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "", "", "86,519", "", "300", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, net", "", "", "", "", "", "", "", "", "", "$ 1", "", "", "", ""], ["Equity component of convertible senior notes, net", "", "377,432", "", "", "", "", "", "", "", "", "", "", "", ""], ["Purchase of capped calls", "", "(102,086)", "", "", "", "", "", "", "", "", "", "", "", ""], ["Other comprehensive income (loss)", "$ (2,574)", "", "", "(2,574)", "", "", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2019", "1,415,796", "", "", "", "", "", "", "", "", "1,160,127", "", "24,522", "", "231,147"], ["Balance, end of period at Dec. 31, 2019", "$ 2,259,913", "$ 9,205,256", "(6,945,930)", "$ 573", "", "", "", "", "", "$ 12", "", "", "", "$ 2"], ["Cumulative-effect adjustment from accounting changes", "", "", "$ 308", "", "", "", "", "", "", "", "", "", "", ""]]}]