[{"headers": [["Consolidated Statements of Cash Flows - USD ($) $ in Thousands", "12 Months Ended"], ["Dec. 31, 2018", "Dec. 31, 2017", "Dec. 31, 2016"]], "sections": ["Cash flows from operating activities", "Adjustments to reconcile net loss to net cash used in operating activities:", "Change in operating assets and liabilities, net of effect of acquisitions:", "Cash flows from investing activities", "Cash flows from financing activities", "Supplemental disclosures", "Supplemental disclosures of non-cash activities", "Supplemental disclosures of non-cash activities"], "data": [["Net loss", "$ (1,255,911)", "$ (3,445,066)", "$ (514,643)"], ["Depreciation and amortization", "91,648", "61,288", "29,115"], ["Stock-based compensation", "538,211", "2,639,895", "31,842"], ["Deferred income taxes", "(383)", "(17,490)", "(7,952)"], ["Excess inventory reserve and related asset impairment", "0", "21,997", "0"], ["Lease exit charges", "33,033", "0", "0"], ["Other", "(903)", "(6,356)", "889"], ["Accounts receivable, net of allowance", "(77,506)", "(104,357)", "(118,434)"], ["Prepaid expenses and other current assets", "1,594", "(39,783)", "(20,521)"], ["Other assets", "21,785", "(4,771)", "(5,064)"], ["Accounts payable", "(33,532)", "49,696", "6,486"], ["Accrued expenses and other current liabilities", "(14,325)", "100,988", "(19,728)"], ["Other liabilities", "6,365", "9,292", "6,765"], ["Net cash used in operating activities", "(689,924)", "(734,667)", "(611,245)"], ["Purchases of property and equipment", "(120,242)", "(84,518)", "(66,441)"], ["Sales of property and equipment", "11,276", "0", "0"], ["Purchases of intangible assets", "(2,565)", "(8,107)", "(572)"], ["Non-marketable investments", "(22,495)", "(10,030)", "(6,513)"], ["Cash paid for acquisitions, net of cash acquired", "(815)", "(386,011)", "(104,001)"], ["Issuance of notes receivable from officers/stockholders", "0", "0", "(15,000)"], ["Repayment of notes receivables from officers/stockholders", "0", "0", "15,000"], ["Purchases of marketable securities", "(1,653,918)", "(3,862,637)", "(1,565,347)"], ["Sales of marketable securities", "45,007", "511,068", "195,898"], ["Maturities of marketable securities", "2,438,206", "2,483,225", "532,690"], ["Net cash provided by (used in) investing activities", "694,454", "(1,357,010)", "(1,014,286)"], ["Proceeds from the exercise of stock options", "47,988", "11,379", "731"], ["Stock repurchases from employees for tax withholdings", "(551)", "(394,156)", "0"], ["Proceeds from issuance of Class A common stock in initial public offering, net of underwriting commissions", "0", "2,657,797", "0"], ["Borrowings from revolving credit facility", "0", "0", "5,000"], ["Principal payments on revolving credit facility", "0", "0", "(5,000)"], ["Payments of initial public offering issuance costs", "0", "(9,672)", "(5,395)"], ["Repurchase of Class B voting common stock and Series FP voting preferred stock", "0", "0", "(10,593)"], ["Proceeds from issuances of preferred stock, net of issuance costs", "0", "0", "1,157,147"], ["Net cash provided by financing activities", "47,437", "2,265,348", "1,141,890"], ["Change in cash, cash equivalents, and restricted cash", "51,967", "173,671", "(483,641)"], ["Cash, cash equivalents, and restricted cash, beginning of period", "337,007", "163,336", "646,977"], ["Cash, cash equivalents, and restricted cash, end of period", "388,974", "337,007", "163,336"], ["Cash paid for income taxes", "3,598", "6,226", "1,686"], ["Assumed equity awards in acquisitions", "0", "3,911", "0"], ["Purchase consideration liabilities related to acquisitions", "0", "16,486", "21,085"], ["Repurchase of Class B voting common stock and Series FP voting preferred stock in exchange for notes receivable from officers/stockholders", "0", "0", "13,500"], ["Recognition of leased facility asset and lease financing obligation", "1,735", "1,451", "1,789"], ["Net change in accounts payable and accrued expenses and other current liabilities related to property and equipment additions", "(7,764)", "13,139", "2,084"], ["Deferred offering costs accrued, unpaid", "0", "0", "1,739"], ["Class B Common Stock", "", "", ""], ["Issuance of Class B common stock related to acquisitions", "$ 0", "$ 0", "$ 96,145"]]}, {"headers": [["Consolidated Statements of Operations - USD ($) shares in Thousands, $ in Thousands", "12 Months Ended"], ["Dec. 31, 2018", "Dec. 31, 2017", "Dec. 31, 2016"]], "sections": ["Income Statement [Abstract]", "Costs and expenses:", "Net loss per share attributable to Class A, Class B, and Class C common stockholders (Note 3):", "Weighted average shares used in computation of net loss per share:"], "data": [["Revenue", "$ 1,180,446", "$ 824,949", "$ 404,482"], ["Cost of revenue", "798,865", "717,462", "451,660"], ["Research and development", "772,185", "1,534,863", "183,676"], ["Sales and marketing", "400,824", "522,605", "124,371"], ["General and administrative", "477,022", "1,535,595", "165,160"], ["Total costs and expenses", "2,448,896", "4,310,525", "924,867"], ["Operating loss", "(1,268,450)", "(3,485,576)", "(520,385)"], ["Interest income", "27,228", "21,096", "4,654"], ["Interest expense", "(3,894)", "(3,456)", "(1,424)"], ["Other income (expense), net", "(8,248)", "4,528", "(4,568)"], ["Loss before income taxes", "(1,253,364)", "(3,463,408)", "(521,723)"], ["Income tax benefit (expense)", "(2,547)", "18,342", "7,080"], ["Net loss", "$ (1,255,911)", "$ (3,445,066)", "$ (514,643)"], ["Basic", "$ (0.97)", "$ (2.95)", "$ (0.64)"], ["Diluted", "$ (0.97)", "$ (2.95)", "$ (0.64)"], ["Basic", "1,300,568", "1,166,085", "807,871"], ["Diluted", "1,300,568", "1,166,085", "807,871"]]}, {"headers": [["Consolidated Balance Sheets - USD ($) $ in Thousands", "Dec. 31, 2018", "Dec. 31, 2017"]], "sections": ["Current assets", "Current liabilities", "Stockholders\u2019 equity", "Stockholders\u2019 equity", "Stockholders\u2019 equity", "Stockholders\u2019 equity"], "data": [["Cash and cash equivalents", "$ 387,149", "$ 334,063"], ["Marketable securities", "891,914", "1,708,976"], ["Accounts receivable, net of allowance", "354,965", "279,473"], ["Prepaid expenses and other current assets", "41,900", "44,282"], ["Total current assets", "1,675,928", "2,366,794"], ["Property and equipment, net", "212,560", "166,762"], ["Intangible assets, net", "126,054", "166,473"], ["Goodwill", "632,370", "639,882"], ["Other assets", "67,194", "81,655"], ["Total assets", "2,714,106", "3,421,566"], ["Accounts payable", "30,876", "71,194"], ["Accrued expenses and other current liabilities", "261,815", "275,062"], ["Total current liabilities", "292,691", "346,256"], ["Other liabilities", "110,416", "82,983"], ["Total liabilities", "403,107", "429,239"], ["Commitments and contingencies (Note 7)", "", ""], ["Additional paid-in capital", "8,220,417", "7,634,825"], ["Accumulated other comprehensive income", "3,147", "14,157"], ["Accumulated deficit", "(5,912,578)", "(4,656,667)"], ["Total stockholders\u2019 equity", "2,310,999", "2,992,327"], ["Total liabilities and stockholders\u2019 equity", "2,714,106", "3,421,566"], ["Class A Non-voting Common Stock", "", ""], ["Common stock, value", "10", "9"], ["Class B Voting Common Stock", "", ""], ["Common stock, value", "1", "1"], ["Class C Voting Common Stock", "", ""], ["Common stock, value", "$ 2", "$ 2"]]}, {"headers": [["Consolidated Statements of Stockholders' Equity - USD ($) shares in Thousands, $ in Thousands", "Total", "Additional Paid-in Capital", "Accumulated Deficit", "Notes Receivable from Officers/Stockholders", "Accumulated Other Comprehensive Income (Loss)", "Convertible Voting Preferred Stock, Series A, A-1, and B \nPreferred Stock", "Convertible Non-voting Preferred Stock, Series C \nPreferred Stock", "Convertible Non-voting Preferred Stock, Series D, E, and F \nPreferred Stock", "Series FP Convertible Voting Preferred Stock \nPreferred Stock", "Series FP Convertible Voting Preferred Stock \nCommon Stock", "Series FP Convertible Voting Preferred Stock \nAdditional Paid-in Capital", "Class A Non-voting Common Stock \nCommon Stock", "Class A Non-voting Common Stock \nAdditional Paid-in Capital", "Convertible Non-voting Preferred Stock Series F \nCommon Stock", "Convertible Non-voting Preferred Stock Series F \nAdditional Paid-in Capital", "Class B Voting Common Stock \nCommon Stock", "Class B Voting Common Stock \nAdditional Paid-in Capital", "Class C Voting Common Stock \nCommon Stock"]], "sections": [], "data": [["Balance, beginning of period, shares at Dec. 31, 2015", "", "", "", "", "", "146,962", "16,000", "44,555", "217,767", "", "", "460,655", "", "", "", "30,931", "", ""], ["Balance, beginning of period at Dec. 31, 2015", "", "$ 1,467,355", "$ (693,219)", "$ (10,000)", "", "$ 1", "", "$ 1", "$ 2", "", "", "$ 5", "", "", "", "", "", ""], ["Issuance of stock, net of issuance costs", "", "", "", "", "", "", "", "$ 1", "", "", "", "", "", "", "$ 1,157,146", "", "", ""], ["Issuance of stock, net of issuance costs. shares", "", "", "", "", "", "", "", "37,668", "", "", "", "", "", "", "", "", "", ""], ["Shares converted to Class A non-voting common stock and subsequently sold in connection with exercise of stock options, shares", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "(536)", "", ""], ["Repurchase of voting stock", "", "", "", "", "", "", "", "", "", "", "$ (16,180)", "", "", "", "", "", "$ (8,013)", ""], ["Repurchase of voting stock, shares", "", "", "", "", "", "", "", "", "(252)", "", "", "", "", "", "", "388", "", ""], ["Impact of Class A stock split, shares", "", "", "", "", "", "", "", "", "", "(252)", "", "", "", "37,668", "", "538", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "698", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions", "", "", "", "", "", "", "", "", "", "", "", "", "$ 96,145", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions, shares", "", "", "", "", "", "", "", "", "", "", "", "6,293", "", "", "", "", "", ""], ["Stock-based compensation expense", "", "31,842", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Vesting of shares related to early exercise of Class A non-voting common stock options", "", "", "", "", "", "", "", "", "", "", "", "", "49", "", "", "", "", ""], ["Net loss", "$ (514,643)", "", "(514,643)", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of notes receivable from officers/stockholders", "", "", "", "(15,000)", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "686", "", ""], ["Other comprehensive income (loss)", "$ (2,057)", "", "", "", "$ (2,057)", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2016", "999,071", "", "", "", "", "146,962", "16,000", "83,851", "215,887", "", "", "504,902", "", "", "", "31,469", "", ""], ["Balance, end of period at Dec. 31, 2016", "$ 1,518,914", "2,728,823", "(1,207,862)", "", "(2,057)", "$ 1", "", "$ 2", "$ 2", "", "", "$ 5", "", "", "", "", "", ""], ["Exchange of Series FP voting preferred stock for Series F non-voting preferred stock, shares", "", "", "", "", "", "", "", "1,628", "(1,628)", "", "", "", "", "", "", "", "", ""], ["Settlement of restricted stock units", "", "(219)", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Repayment of notes receivable from officers/stockholders", "", "", "", "$ 25,000", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Cumulative-effect adjustment from adoption of ASU 2016-16", "", "", "(3,739)", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Issuance of stock, net of issuance costs", "", "2,642,729", "", "", "", "", "", "", "", "", "", "$ 2", "", "", "", "", "", ""], ["Issuance of stock, net of issuance costs. shares", "", "", "", "", "", "", "", "", "", "", "", "160,350", "", "", "", "", "", ""], ["Shares converted to Class A non-voting common stock and subsequently sold in connection with exercise of stock options, shares", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "(4,923)", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "$ 1", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "11,379", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Class A non-voting common stock sold in connection with exercise of stock options, shares", "", "", "", "", "", "", "", "", "", "", "", "4,923", "", "", "", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "", "", "", "", "9,928", "", "", "", "9,396", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions", "", "", "", "", "", "", "", "", "", "", "", "", "$ 6,406", "", "", "", "", ""], ["Issuance of Class A non-voting common stock in connection with acquisitions, shares", "", "", "", "", "", "", "", "", "", "", "", "1,854", "", "", "", "", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "", "", "", "", "40,922", "", "", "", "18,906", "", ""], ["Stock-based compensation expense", "", "2,639,895", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "(3,445,066)", "", "(3,445,066)", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "(146,962)", "(16,000)", "(83,851)", "(215,887)", "", "", "169,800", "", "", "", "246,813", "", "215,887"], ["Conversion of stock to voting/non-voting common stock", "", "", "", "", "", "$ (1)", "", "$ (2)", "$ (2)", "", "", "$ 2", "", "", "", "$ 2", "", "$ 2"], ["Issuance of Class C voting common stock for settlement of restricted stock awards, Shares", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "3,122"], ["Stock repurchases from employees for tax withholdings", "", "(394,407)", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Stock repurchases from employees for tax withholdings, shares", "", "", "", "", "", "", "", "", "", "", "", "(16,867)", "", "", "", "(8,390)", "", ""], ["Class A non-voting common stock sold to cover taxes, shares", "", "", "", "", "", "", "", "", "", "", "", "7,210", "", "", "", "", "", ""], ["Shares converted to Class A non-voting common stock and subsequently sold to cover taxes, shares", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "(907)", "", "(2,393)"], ["Other comprehensive income (loss)", "$ 16,214", "", "", "", "16,214", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2017", "1,222,202", "", "", "", "", "", "", "", "", "", "", "883,022", "", "", "", "122,564", "", "216,616"], ["Balance, end of period at Dec. 31, 2017", "$ 2,992,327", "7,634,825", "(4,656,667)", "", "14,157", "", "", "", "", "", "", "$ 9", "", "", "", "$ 1", "", "$ 2"], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards", "", "", "", "", "", "", "", "", "", "", "", "$ 1", "", "", "", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans", "", "47,988", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Shares issued in connection with exercise of stock options under stock-based compensation plans, shares", "", "", "", "", "", "", "", "", "", "", "", "15,856", "", "", "", "3,414", "", ""], ["Issuance of voting/non-voting common stock for vesting of restricted stock units and restricted stock awards, shares", "", "", "", "", "", "", "", "", "", "", "", "64,831", "", "", "", "3,502", "", ""], ["Stock-based compensation expense", "", "538,211", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Net loss", "(1,255,911)", "", "(1,255,911)", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Conversion of stock to voting/non-voting common stock, shares", "", "", "", "", "", "", "", "", "", "", "", "35,634", "", "", "", "", "", ""], ["Issuance of Class C voting common stock for settlement of restricted stock awards, Shares", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "7,995"], ["Stock repurchases from employees for tax withholdings", "", "(607)", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Stock repurchases from employees for tax withholdings, shares", "", "", "", "", "", "", "", "", "", "", "", "(39)", "", "", "", "", "", ""], ["Other comprehensive income (loss)", "$ (11,010)", "", "", "", "(11,010)", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["Balance, end of period, shares at Dec. 31, 2018", "1,317,761", "", "", "", "", "", "", "", "", "", "", "999,304", "", "", "", "93,846", "", "224,611"], ["Balance, end of period at Dec. 31, 2018", "$ 2,310,999", "$ 8,220,417", "$ (5,912,578)", "", "$ 3,147", "", "", "", "", "", "", "$ 10", "", "", "", "$ 1", "", "$ 2"]]}]